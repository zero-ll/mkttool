# 红人搜索系统 - 产品需求文档 (PRD)

> **版本**: v2.1  
> **更新日期**: 2026-01-27  
> **状态**: 开发中

---

## 📋 产品概述

**产品名称**: 红人搜索系统 (Influencer Search Platform)

**产品定位**: 为营销团队提供高效的红人发现、评估和管理工具，支持多项目隔离、基于关键词和红人ID的多维度搜索，帮助品牌快速找到匹配的KOL/KOC。

**核心价值**:
- 🎯 **精准匹配**: 通过关键词、频道类型、粉丝区间等多维度筛选
- 📊 **数据驱动**: 基于真实数据评估红人价值
- 🔄 **高效管理**: 任务化管理搜索流程，避免重复工作
- 🤝 **建联追踪**: 统一管理已联系/合作的红人
- 🏢 **多项目支持**: 支持多个项目独立管理，数据隔离

---

## 👥 用户角色

### 主要用户
- **营销经理**: 创建项目和搜索任务，审核红人名单
- **营销专员**: 执行搜索任务，筛选红人，发起建联
- **数据分析师**: 导出数据，分析红人效果
- **团队协作者**: 跨项目查看和管理红人资源

---

## 🎯 核心功能模块

### 1. 搜索任务管理 (Search Tasks)

#### 1.1 任务列表页 `[前端主导]` `[后端:数据接口]`

**功能描述**: 展示当前项目下的所有搜索任务，支持查看、编辑、删除

**界面元素**:
- ✅ 任务卡片展示（网格布局）
- ✅ 字段：任务名称、搜索类型、搜索结果数、任务状态、创建时间、创建人
- ✅ 操作按钮：查看结果、查看参数、重命名、删除
- ✅ 搜索框：快速筛选任务
- ✅ "排除列表"按钮
- ✅ "新建任务"按钮

**交互流程**:
1. 用户进入任务列表页，看到所有任务卡片
2. 可以通过搜索框筛选任务
3. 点击"搜索结果数"或"查看结果"按钮 → 跳转到任务详情页
4. 点击"查看参数"按钮 → 打开参数抽屉查看搜索配置
5. 点击"重命名"按钮 → 弹出重命名对话框
6. 点击"删除"按钮 → 确认后删除任务

**前后端分工**:
- **前端**: 
  - UI渲染、卡片交互
  - 本地搜索筛选
  - 状态管理
  - 双入口跳转逻辑
- **后端**: 
  - 返回当前项目的任务列表数据
  - 处理删除/重命名请求
  - 任务名称唯一性校验

**需要的后端接口**:
- `GET /project/spiderRecord/list` - 获取任务列表
- `PUT /project/spiderRecord` - 重命名任务
- `DELETE /project/spiderRecord/{id}` - 删除任务

---

#### 1.2 创建任务 - 关键词搜索 `[前后端]` 

**功能描述**: 通过关键词组合搜索匹配的红人

**UI 设计**: 分步骤表单（3步）

**Step 1: 基本信息** `[前端验证]` `[后端:数据接收]`

**界面元素**:
- ✅ 任务名称（必填）
- ✅ 行业关键词（必填，标签输入）
- ✅ 本品关键词（必填，标签输入）
- ✅ 竞品关键词（必填，标签输入）

**验证规则**:
- 任务名称不能为空
- 行业关键词至少添加一个
- 本品关键词至少添加一个
- 竞品关键词至少添加一个

**Step 2: 搜索配置** `[前端验证]` `[后端:数据接收]`

**界面元素**:
- ✅ 单个关键词搜索视频数（必填，默认50）
- ✅ 排序方式（相关性/观看次数/发布日期）
- ✅ 国家偏好（必填，多选）
- ✅ 搜索维度（按视频/按频道）
- ✅ 粉丝数区间（可选）
- ✅ 排除选项（排除已搜索/排除去重红人）

**验证规则**:
- 国家偏好至少选择一个

**Step 3: 目标画像** `[前端验证]` `[后端:数据接收]`

**界面元素**:
- ✅ P0 频道类型（必填，标签输入）
- ✅ P1 频道类型（必填，标签输入）
- ✅ P2 频道类型（必填，标签输入）

**验证规则**:
- P0 频道类型至少添加一个
- P1 频道类型至少添加一个
- P2 频道类型至少添加一个

**前后端分工**:
- **前端**: 
  - 分步表单UI
  - 表单验证逻辑
  - 错误提示
  - 数据收集和提交
- **后端**: 
  - 接收任务参数
  - 任务名称唯一性校验
  - 创建搜索任务
  - 调用 YouTube API 搜索

**需要的后端接口**:
- `POST /spider/youtube/search` - 创建关键词搜索任务

---

#### 1.3 创建任务 - 红人ID搜索 `[前后端]`

**功能描述**: 通过上传Excel文件批量搜索指定红人

**界面元素**:
- ✅ 任务名称（必填）
- ✅ Excel文件上传（必填）
- ✅ 行业关键词（可选）
- ✅ 本品关键词（可选）
- ✅ 竞品关键词（可选）

**前后端分工**:
- **前端**: 
  - 文件上传UI
  - 文件格式验证
  - 表单数据收集
- **后端**: 
  - 接收文件和参数
  - 解析Excel文件
  - 提取红人ID
  - 调用 YouTube API 获取红人信息

**需要的后端接口**:
- `POST /spider/youtube/excel_search` - 创建红人ID搜索任务

---

#### 1.4 任务详情页 `[前端主导]` `[后端:数据接口]`

**功能描述**: 展示搜索结果，支持筛选、排序、导出

**界面元素**:
- ✅ 任务信息（名称、状态、创建时间等）
- ✅ 筛选器（粉丝量级、国家）
- ✅ 排序选项（粉丝数、视频数、观看量等）
- ✅ 列设置（自定义显示列）
- ✅ 操作按钮（筛选、详情视图、列设置、导出）
- ✅ 红人列表表格
- ✅ 详情弹窗（查看单个红人详情）
- ✅ 批量视图弹窗（查看多个红人）

**表格列**:
- 基础列：红人名称、粉丝量级、国家、类型
- 分数列：质量分、匹配分
- 数据列：均播、互动率、商单数、预估CPM、建议报价
- 深度指标列（可选）：近3月发片、中位播放、商单均播等
- 状态列：合作状态
- 操作列：详情、收藏建联

**前后端分工**:
- **前端**: 
  - 表格渲染
  - 筛选和排序逻辑
  - 列显示控制
  - 弹窗交互
  - 本地状态管理
- **后端**: 
  - 返回搜索结果数据
  - 提供筛选选项（国家列表等）
  - 处理导出请求

**需要的后端接口**:
- `GET /project/channelInfo/list` - 获取搜索结果
- `GET /project/channelInfo/countryList/{uuid}` - 获取国家筛选列表
- `POST /spider/download` - 导出搜索结果

---

### 2. 红人建联管理 (Connections)

#### 2.1 建联列表页 `[前端主导]` `[后端:数据接口]`

**功能描述**: 管理和跟踪已收藏/建联的红人

**界面元素**:
- ✅ 搜索框（搜索红人）
- ✅ 筛选器（Email状态、来源任务、创建人）
- ✅ 导出按钮
- ✅ 红人列表表格

**表格列**:
- 红人信息：头像、名称、handle
- 联系方式：Email
- 价格信息：价格区间、CPM
- 质量分数
- 来源任务
- 创建人
- 操作：查看详情

**交互流程**:
1. 用户进入建联列表页
2. 可以通过搜索框和筛选器查找红人
3. 点击红人行查看详情
4. 点击导出按钮导出数据

**前后端分工**:
- **前端**: 
  - 表格渲染
  - 搜索和筛选逻辑
  - 导出功能
- **后端**: 
  - 返回建联红人列表
  - 提供筛选选项
  - 处理导出请求

**需要的后端接口**:
- `GET /project/connections/list` - 获取建联红人列表（新接口）
- `GET /project/connections/export` - 导出建联数据（新接口）

---

### 3. 排除列表管理 (Exclusions)

#### 3.1 排除列表页 `[前端主导]` `[后端:数据接口]`

**功能描述**: 管理全局排除的红人，避免在搜索结果中出现

**界面元素**:
- ✅ 上传Excel按钮
- ✅ 红人列表表格
- ✅ 删除按钮

**前后端分工**:
- **前端**: 
  - 文件上传UI
  - 表格渲染
  - 删除交互
- **后端**: 
  - 接收和解析Excel文件
  - 保存排除红人
  - 返回排除列表
  - 处理删除请求

**需要的后端接口**:
- `POST /project/exclusions/upload` - 上传排除红人（新接口）
- `GET /project/exclusions/list` - 获取排除列表（新接口）
- `DELETE /project/exclusions/{id}` - 删除排除红人（新接口）

---

### 4. 项目管理 (Projects)

#### 4.1 项目切换器 `[前端主导]` `[后端:数据接口]`

**功能描述**: 在顶部导航栏提供项目切换功能

**界面元素**:
- ✅ 项目下拉选择器
- ✅ 当前项目指示器
- ✅ "创建新项目"按钮

**前后端分工**:
- **前端**: 
  - 项目选择器UI
  - 切换交互
  - 创建对话框
- **后端**: 
  - 返回项目列表
  - 创建新项目
  - 权限验证

**需要的后端接口**:
- `GET /project/project/userReportOption` - 获取项目列表
- `POST /project/project` - 创建新项目（新接口）

---

## 🎨 UI/UX 设计规范

### 设计风格
- **Light Neumorphism + Soft Glassmorphism**
- 柔和的双重阴影系统
- 玻璃态材质
- 大圆角设计
- 渐变色彩

### 色彩系统
- 主色：橙色渐变 `#F97316` → `#FB923C`
- 背景：浅灰渐变 `#EEF2F6` → `#E5E9F0`
- 成功色：翠绿 `#34D399`
- 警告色：黄色 `#FBBF24`
- 错误色：红色 `#F87171`

### 组件规范
- **按钮**: 新拟物主义风格，带悬停上浮效果
- **卡片**: 双重阴影，圆角 16-24px
- **表格**: 玻璃态表头，渐变行悬停
- **弹窗**: 模糊背景，新拟物卡片
- **标签**: 渐变背景，悬停缩放

---

## 📱 响应式设计

### 断点
- 移动端：< 768px
- 平板：768px - 1024px
- 桌面：> 1024px

### 适配策略
- 移动端：单列布局，汉堡菜单
- 平板：双列布局，侧边栏可折叠
- 桌面：多列布局，固定侧边栏

---

## 🌐 国际化

### 语言支持
- 中文（简体）- 默认
- 英文 - 计划中

### 专有名词保持英文
- YouTube
- CPM
- Email
- P0/P1/P2

---

## 📊 数据字段说明

### 红人基础信息
- `channelId`: 频道ID
- `channelTitle`: 红人名称
- `avatar`: 头像URL
- `homepage`: 主页链接
- `subscriberCount`: 粉丝数
- `subscriberCntLevel`: 粉丝量级（MEGA/TOP/MACRO等）
- `country`: 国家
- `videoCount`: 视频数
- `viewCount`: 总观看次数

### 红人评估指标
- `channelQualityScore`: 质量分（0-100）
- `bizMatchingScore`: 匹配分（0-100）
- `avgViews`: 平均观看量
- `recEngagementRate`: 互动率
- `recBrVideoCnt`: 商单数量
- `predictCpm`: 预估CPM
- `suggestedQuotation`: 建议报价

### 深度指标
- `videoCntIn90d`: 近3月发片数
- `recMedianViewCnt`: 近10条视频中位播放
- `recShortVideoCnt`: 近10条短视频数
- `recLongVideoCnt`: 近10条长视频数
- `recBrAvgViewCnt`: 商单均播
- `recBrMedianViewCnt`: 商单中位播放
- `recBrTopEngRate`: 商单最高互动率
- `recBrTopViewCnt`: 商单最高观看量
- `bvAvgRatio`: 商单均播占比
- `recBrLink`: 商单视频链接

### 任务信息
- `uuid`: 任务唯一标识
- `taskName`: 任务名称
- `searchWay`: 搜索方式（keywords/channelId）
- `status`: 任务状态（init/running/success/error）
- `creator`: 创建人
- `createTime`: 创建时间

---

## 🔐 权限和安全

### 用户认证
- 基于 Token 的认证机制
- Token 过期时间：7天
- 自动刷新机制

### 数据隔离
- 所有数据按项目隔离
- 用户只能访问有权限的项目
- API 请求携带项目ID

---

## 📈 性能要求

### 页面加载
- 首屏加载时间 < 2秒
- 交互响应时间 < 100ms

### 数据处理
- 表格渲染支持虚拟滚动
- 大数据量分页加载
- 导出功能支持后台任务

---

## 🚀 未来规划

### Phase 1（当前版本）
- ✅ 基础搜索功能
- ✅ 任务管理
- ✅ 建联管理
- ✅ 排除列表
- ✅ UI/UX 升级

### Phase 2（计划中）
- ⏳ 红人评估功能
- ⏳ 高级筛选
- ⏳ 数据分析看板
- ⏳ 团队协作功能

### Phase 3（未来）
- 📅 多平台支持（TikTok、Instagram）
- 📅 AI 推荐
- 📅  自动化建联
- 📅  效果追踪

---

## 📝 更新日志

### v2.1 (2026-01-27)
- ✅ 完善任务列表页（新增查看参数按钮、双入口跳转）
- ✅ 添加表单验证（Step 1 和 Step 3 必填字段）
- ✅ 简化建联页面（删除批量邮件功能）
- ✅ 全局中文化（所有界面文字）
- ✅ UI/UX 升级（Light Neumorphism 设计）

### v2.0 (2026-01-26)
- ✅ 初始版本
- ✅ 基础搜索功能
- ✅ 任务管理
- ✅ 建联管理
