# 项目优化变更记录

本文档用于记录项目开发过程中的所有优化变更与功能迭代。

## 2024-01-26

### 1. 初始化项目与基础架构
- **技术栈**: Vite + React + TailwindCSS
- **核心模块**:
  - **红人搜索 (Search Tasks)**: 支持任务创建、查看、管理。
  - **红人建联 (Influencer Connect)**: 管理已标记/收藏的红人。
- **状态管理**: 使用 React Context (`AppContext`) 管理全局状态（任务列表、红人数据）。
- **路由**: 使用 React Router 实现页面导航。

### 2. UI/UX 风格调整
- **视觉风格**: 从最初的“深色玻璃拟态 (Dark Glassmorphism)”调整为**“清爽浅色风格 (Light Mode)”**。
  - 背景色调整为 `Slate-50` (#f8fafc)。
  - 采用了干净、现代的卡片和表格设计。
- **语言本地化**: 全站界面文案从英文切换为**中文**。

### 3. 功能增强：红人搜索 (Search Tasks)
- **数据模型扩展**:
  - 新增字段：`搜索方式` (Search Method)、`创建人` (Creator)。
- **交互优化**:
  - **列表视图重构**: 将原本的“卡片式布局”改为**“表格列表布局”**，信息展示更高效。
  - **新增操作**:
    - **重命名任务**: 支持对现有任务进行重命名。
    - **删除任务**: 支持删除不需要的任务。
    - **查看参数**: 快速查看任务的搜索条件（平台、关键词）。
- **字段展示**:
  - 列表页现在包含：任务名称、搜索方式、任务状态、创建时间、创建人、搜索结果概览。

### 4. 工程化配置
- **TailwindCSS 集成**: 完成了 TailwindCSS 的安装与详细配置 (`tailwind.config.js`, `postcss.config.js`)，修复了样式加载问题。

### 5. 任务创建流程优化
- **独立创建页面**: 将"创建任务"从弹窗改为**独立子页面** (`/create-task`)，提供更好的用户体验。
- **双模式搜索**:
  - **按关键词搜索**: 支持输入任务名称、行业/品牌/竞品关键词、排序方式、搜索维度、目标国家、粉丝数范围、排除已评估红人等。
  - **按红人ID搜索**: 支持上传红人名单（Excel/CSV）、设置关键词、频道类型匹配等。
- **高级配置增强**:
  - **标签式输入**: 行业/品牌/竞品关键词支持输入多个，回车生成标签，支持分号自动分割。
  - **多选国家**: 目标国家改为下拉多选。
  - **粉丝区间**: 精确控制粉丝数范围（支持大于、小于、等于等操作符，最小值为10）。
  - **单个关键词最大红人数**: 按关键词搜索新增此配置，限制每个关键词返回的红人数量。
  - **排除选项优化**: 
    - 移除"排除已评估红人"
    - 新增"排除已搜索过的红人"（默认选中）：不展示其他任务已搜索的红人
    - 新增"排除去重的红人"（默认选中）：不展示首页去重列表的红人
  - **红人画像配置**: 新增 P0/P1/P2 频道类型配置，支持标签式输入。

### 6. 排除红人管理
- **页面升级**: "上传排除红人"从按钮升级为**独立子页面** (`/exclusions`)。
- **页面功能**:
  - **搜索框**: 快速查找已上传的排除红人（支持按红人名称或ID搜索）
  - **上传按钮**: 上传 Excel/CSV 格式的红人名单
  - **列表展示**: 红人ID、红人名称、红人平台、上传时间、上传人
  - **删除操作**: 支持单个删除排除红人
  - **分页功能**: 支持大量数据的分页展示
- **模板格式**: Excel (.xlsx, .xls) 或 CSV，必需字段：红人ID、红人名称、红人平台

### 7. 查看任务参数
- **新增功能**: 首页任务列表的"查看任务参数"操作，点击后从**右侧展开抽屉**。
- **抽屉内容**:
  - **基本信息**: 任务名称、搜索方式、平台
  - **关键词配置**: 行业/品牌/竞品关键词（标签展示）
  - **筛选条件**: 排序方式、搜索维度、目标国家、粉丝区间
  - **排除选项**: 是否排除已搜索/去重红人（高亮显示"是"）
  - **目标红人画像**: P0/P1/P2 频道类型配置
- **交互优化**: 使用右侧抽屉而非弹窗，提供更好的查看体验，不打断用户浏览任务列表。

### 8. 任务详情页全面升级
- **高级筛选面板**:
  - **下拉多选**: 粉丝量级、国家、红人类型
  - **下拉单选**: 是否有邮箱
  - **数值范围**: 红人质量分、业务匹配度、近10条均播、预估CPM
  - **操作按钮**: 查询、清空
- **红人列表增强**（共21个字段）:
  - **默认显示11列**: 红人、粉丝量级、国家、红人类型、质量评估、业务匹配度、近10条均播、互动率、商单数量、预估CPM、建议报价
  - **可选显示10列**: 近3个月发布视频数、近10条播放中位数、近10条短/长视频数量、商单相关数据（均播、中位数、最高观看量等）、商单视频链接
- **红人列展示优化**:
  - 显示红人头像、名称、handle
  - 质量评估和业务匹配度**分数颜色分级**：
    - <60分：红色背景
    - 60-80分：橙色背景
    - >80分：绿色背景
- **列设置功能**:
  - 点击右上角"列设置"按钮展开设置面板
  - 支持自定义显示/隐藏列（红人列固定不可隐藏）
  - 实时生效
- **收藏建联**:
  - 每行最右侧固定"建联"按钮
  - 用于用户评估后快捷标记要建联的红人

### 9. 红人建联页面
- **页面路径**: `/connect`
- **功能概述**: 统一管理从各个任务中标记的待建联红人
- **顶部操作**:
  - 显示建联红人总数统计
  - **导出按钮**: 一键导出 CSV 格式数据（UTF-8编码，支持中文）
- **筛选面板**（3个筛选器）:
  - **是否有邮箱**: 全部/有邮箱/无邮箱
  - **搜索任务**: 下拉选择，筛选来自特定任务的红人
  - **添加人**: 下拉选择，筛选特定用户标记的红人
- **红人列表**（7列）:
  - **红人**: 头像、名称、handle
  - **联系邮箱**: 
    - 有邮箱：绿色图标 + 可点击的邮箱链接
    - 无邮箱：灰色图标 + "无邮箱"文字
  - **预估报价**: 人民币区间
  - **CPM**: 美元
  - **质量分数**: 颜色分级显示（<60红色、60-80橙色、>80绿色）
  - **来自搜索任务**: 多个标签展示（一个红人可能来自多个任务）
  - **添加人**: 用户名 + 添加时间
- **导出功能**:
  - CSV 格式，包含所有字段
  - 文件名：`connected_influencers.csv`
  - 自动添加 BOM 头确保 Excel 正确识别中文
